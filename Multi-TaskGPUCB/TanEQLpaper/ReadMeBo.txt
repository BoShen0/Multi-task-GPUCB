Several things are improtant to code speed:
(1) the intergral threshold 10^-9 10^-6 10^-3
(2) the number of search points, which relates to the input dimension
(3) matlab patternsearch some paramaters are important